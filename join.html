<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Join our Waiting List • Beacon DPC</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body{font-family:Inter,system-ui,Arial,sans-serif;margin:0;background:#fff;color:#0f172a}
    header{background:#fff;border-bottom:1px solid #e2e8f0;padding:16px}
    .container{max-width:760px;margin:0 auto;padding:24px}
    nav a{margin-right:16px;text-decoration:none;color:#106C6E;font-weight:600}
    h1{margin-top:0}
    form{display:grid;gap:16px}
    label{font-weight:600}
    input{width:100%;padding:10px;border-radius:8px;border:1px solid #cbd5e1}
    .btn{background:#106C6E;color:#fff;padding:12px 16px;border:none;border-radius:8px;font-weight:600;cursor:pointer}
    .btn:disabled{opacity:.6}
    .error{color:#b91c1c;font-size:14px}
    .success{color:#065f46;font-size:14px}
    footer{margin-top:40px;padding:20px;border-top:1px solid #e2e8f0;text-align:center;color:#475569}
  </style>
</head>
<body>
  <header>
    <nav>
      <a href="/index.html">Home</a>
      <a href="/about.html">About</a>
      <a href="/why-dpc.html">Why DPC</a>
    </nav>
  </header>

  <main>
    <div class="container">
      <h1>Join our Waiting List</h1>
      <p>Only first name and one contact method are required. We’ll notify you as openings become available.</p>

      <form id="waitlist-form" novalidate>
        <div>
          <label for="firstName">First name *</label>
          <input id="firstName" name="firstName" required>
          <div class="error" data-err="firstName"></div>
        </div>
        <div>
          <label for="lastName">Last name</label>
          <input id="lastName" name="lastName">
        </div>
        <div>
          <label for="address">Address</label>
          <input id="address" name="address">
        </div>
        <div>
          <label for="email">Email</label>
          <input id="email" name="email" type="email">
        </div>
        <div>
          <label for="phone">Phone</label>
          <input id="phone" name="phone" type="tel">
        </div>
        <div class="error" data-err="contact"></div>

        <button class="btn" type="submit" id="submitBtn">Join waiting list</button>
        <div id="status"></div>
      </form>
    </div>
  </main>

  <footer>
    © <span id="y"></span> Beacon Direct Primary Care PLLC
  </footer>

  <script>
    document.getElementById("y").textContent=new Date().getFullYear();
    const FORM=document.getElementById("waitlist-form");
    const STATUS=document.getElementById("status");
    const BTN=document.getElementById("submitBtn");
    const BACKEND_URL="https://script.google.com/macros/s/AKfycbzvdfwehxhIbBpYNNAb_GAy3FGXG3azgAu5jxZJiZibse4GzSMuxXvCDgsTS2f2K4Z6jQ/exec;

    function setError(key,msg){
      const el=document.querySelector(`[data-err="${key}"]`);
      if(el) el.textContent=msg||"";
    }
    function validate(data){
      let ok=true; setError("firstName",""); setError("contact","");
      if(!data.firstName){setError("firstName","First name is required."); ok=false;}
      if(!(data.email||data.phone)){setError("contact","Provide at least one contact method: email or phone."); ok=false;}
      return ok;
    }

    FORM.addEventListener("submit",async e=>{
      e.preventDefault();
      STATUS.textContent="";
      const data=Object.fromEntries(new FormData(FORM).entries());
      if(!validate(data)) return;
      BTN.disabled=true; BTN.textContent="Submitting…";
      try{
        const res=await fetch(BACKEND_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({source:"beacon-waitlist-v1",timestamp:new Date().toISOString(),...data})});
        let ok=false;
        try{const j=await res.json(); ok=j&&j.ok;}catch(_){ok=res.ok;}
        if(ok){STATUS.innerHTML='<div class="success">Thank you. You\'re on the waiting list.</div>'; FORM.reset();}
        else{throw new Error("Submission failed");}
      }catch(err){
        STATUS.innerHTML='<div class="error">Submission failed. Email beaconfamilymedicine@gmail.com.</div>';
      }finally{
        BTN.disabled=false; BTN.textContent="Join waiting list";
      }
    });
  </script>
</body>
</html>